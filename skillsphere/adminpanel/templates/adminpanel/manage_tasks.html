{% extends 'adminpanel/admin_base.html' %}
{% block content %}
{% load static %}
<head>
    <meta charset="UTF-8">
    <title>SkillSphere Admin Panel</title>

    <!-- Tailwind for Admin UI -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Existing styles -->
    <link rel="stylesheet" href="{% static 'css/admin.css' %}">
</head>

<div class="page-header">
    <h2>‚úÖ Manage Tasks</h2>
</div>

<div class="tabs">
    <button class="tab-btn active" onclick="showTab('skill')">Skill Practice Tasks</button>
    <button class="tab-btn" onclick="showTab('internship')">Internship Tasks</button>
</div>

<div id="tab-skill" class="tab-content active">
    <div class="tab-header">
        <h3>üß† Skill Practice Tasks</h3>
        <a href="{% url 'add_skill_task' %}" class="btn-add">+ Add Skill Task</a>
    </div>

    {% if skill_tasks %}
    <table class="styled-table">
        <thead>
            <tr>
                <th>Skill</th>
                <th>Title</th>
                <th>Difficulty</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for t in skill_tasks %}
            <tr>
                <td>{{ t.skill.name }}</td>
                <td>{{ t.question_text|truncatechars:40 }}</td>
                <td>{{ t.difficulty }}</td>
                <td class="flex gap-3">
                    <a href="{% url 'edit_skill_task' t.id %}"
                        class="px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm">
                        ‚úè Edit
                    </a>
                    <a href="{% url 'delete_skill_task' t.id %}"
                        class="px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm">
                        üóë Delete
                    </a>
                </td>

            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <div class="empty-box">No skill tasks yet.</div>
    {% endif %}
</div>

<div id="tab-internship" class="tab-content">
    <div class="tab-header">
        <h3>üíº Internship Tasks</h3>
        <a href="{% url 'add_internship_task' %}" class="btn-add">+ Add Internship Task</a>
    </div>

    {% if internship_tasks %}
    <table class="styled-table">
        <thead>
            <tr>
                <th>Internship</th>
                <th>Order</th>
                <th>Title</th>
                <th>Reward</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for t in internship_tasks %}
            <tr>
                <td>{{ t.internship.title }}</td>
                <td>{{ t.order }}</td>
                <td>{{ t.title }}</td>
                <td>{{ t.reward_points }} pts</td>
                <td>
                    <a href="{% url 'delete_internship_task' t.id %}" class="btn-delete"
                       onclick="return confirm('Delete this task?')">üóë Delete</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
        <div class="empty-box">No internship tasks yet.</div>
    {% endif %}
</div>

<style>
.page-header { margin-bottom: 20px; }
.tabs { margin-bottom: 15px; }
.tab-btn {
    padding: 8px 14px;
    margin-right: 8px;
    border-radius: 999px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    background: #1e2a45;
    color: #fff;
}
.tab-btn.active { background: #ffca2c; color: #000; }
.tab-content { display: none; }
.tab-content.active { display: block; }

.tab-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}
.btn-add {
    background: #ffca2c;
    padding: 8px 14px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    color: #000;
}
.btn-add:hover { background: #e3b422; }

.styled-table {
    width: 100%;
    border-collapse: collapse;
    background: #111a2c;
    border-radius: 8px;
    overflow: hidden;
}
.styled-table thead { background: #1e2a45; }
.styled-table th, .styled-table td {
    padding: 12px;
    text-align: left;
}
.styled-table tr:nth-child(even) { background: #16203a; }
.styled-table tr:hover { background: #223053; }

.btn-delete {
    background: #d9534f;
    padding: 6px 12px;
    border-radius: 6px;
    color: white;
    text-decoration: none;
    font-weight: 600;
}
.btn-delete:hover { background: #c0392b; }
.empty-box {
    padding: 30px;
    text-align: center;
    color: #aaa;
}
</style>

<script>
function showTab(which) {
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));

    if (which === 'skill') {
        document.querySelector('[onclick*="skill"]').classList.add('active');
        document.getElementById('tab-skill').classList.add('active');
    } else {
        document.querySelector('[onclick*="internship"]').classList.add('active');
        document.getElementById('tab-internship').classList.add('active');
    }
}
</script>
<a href="{% url 'admin_dashboard' %}"
   class="inline-flex items-center px-4 py-2 mb-5 text-white bg-gray-700 hover:bg-gray-800 rounded-lg transition">
    ‚Üê Back
</a>


{% endblock %}
